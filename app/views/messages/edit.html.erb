<%# app/views/messages/edit.html.erb %>

<div class="min-h-[calc(100vh-80px)] bg-gray-950 py-6 px-4 flex items-center justify-center">
  <div class="w-full max-w-2xl">
    
    <%# Header %>
    <div class="mb-8 text-center">
      <h1 class="font-archivo text-3xl text-green-500 tracking-tighter uppercase drop-shadow-[0_0_10px_rgba(34,197,94,0.4)] mb-2">
        Edit Message
      </h1>
      <p class="text-[10px] text-green-700 font-mono uppercase tracking-[0.3em]">
        Modifying transmission... Time limit: 1 hour
      </p>
    </div>

    <%# Form de Edição %>
    <div class="bg-gray-900/60 backdrop-blur-xl border border-green-500/30 rounded-2xl p-6 shadow-2xl">
      <%= form_with(model: @message, url: chat_message_path(@chat, @message), method: :patch, class: "space-y-4") do |f| %>
        
        <%# Textarea para editar mensagem %>
        <div>
          <label class="block text-[10px] text-green-500 font-bold uppercase tracking-wider mb-2">
            Message Content
          </label>
          <%= f.text_area :body, 
                          rows: 6,
                          class: "w-full bg-green-950/20 border border-green-500/30 rounded-xl px-4 py-3 text-green-100 placeholder:text-green-900 focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm font-mono transition-all resize-none",
                          placeholder: "> Type your message..." %>
        </div>

        <%# Botões %>
        <div class="flex gap-3 pt-4">
          <%= f.submit "Save Changes", 
                       class: "flex-1 bg-green-500/20 border border-green-500/40 px-6 py-3 rounded-xl text-sm font-bold text-green-400 hover:bg-green-500/30 hover:border-green-500 transition-all shadow-lg cursor-pointer uppercase tracking-wider" %>
          
          <%= link_to "Cancel", 
                      chat_path(@chat), 
                      class: "flex-1 bg-gray-800/40 border border-gray-700/40 px-6 py-3 rounded-xl text-sm font-bold text-gray-400 hover:bg-gray-800/60 hover:border-gray-600 transition-all text-center uppercase tracking-wider" %>
        </div>
      <% end %>
    </div>

    <%# Preview da mensagem original %>
    <div class="mt-6 p-4 bg-gray-900/40 backdrop-blur-sm border border-green-500/20 rounded-xl">
      <div class="text-[9px] text-green-700 uppercase tracking-wider mb-2">Original Message:</div>
      <div class="text-sm text-green-300/70 font-mono break-words whitespace-pre-wrap">
        <%= @message.body %>
      </div>
      <div class="text-[8px] text-green-900 mt-2">
        Sent at <%= @message.created_at.strftime("%H:%M:%S on %d/%m/%Y") %>
      </div>
    </div>

  </div>
</div>


